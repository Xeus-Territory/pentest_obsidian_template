# Target

1. https://www.example.com
2. https://www.xeusnguyen.xyz
3. ...
# Introduce

>[!info]
>Following documentation of [EC-Council](https://www.eccouncil.org/cybersecurity-exchange/penetration-testing/penetration-testing-phases/), we have five phases of Penetration Testing. There are five penetration testing phases:Â **reconnaissance, scanning, vulnerability assessment, exploitation, and reporting**. You can ignore first one because target is not problem with our customers because they send us the domain for exploiting

![[pentest-step.png]]

# Reconnaissance

>[!info]
>In this phase, the tester gathers as much information about the target system as they can, including information about the network topology, operating systems and applications, user accounts, and other relevant information. The goal is to gather as much data as possible so that the tester can plan an effective attack strategy.

## Scan Port

>[!info]
>Port is important part when we figure out what target expose - simple network things, usually open 80-443 for web. But in other ways, we can detect more endpoint with these domain to provide locate for step 3 to 5

Tool: [nmap](https://nmap.org/)

We will use `nmap` to search and figure out what port is open in the target, through of them we will collect information about

- Which ports are open in target?
- Which services are use for hosting target?
- Information about certificate of target

Dynamic to use `nmap` with these commands

### TCP

- **Open** port: _SYN --> SYN/ACK --> RST_
- **Closed** port: _SYN --> RST/ACK_
- **Filtered** port: _SYN --> [NO RESPONSE]_
- **Filtered** port: _SYN --> ICMP message_

```bash
# General nmap for fast scan
nmap -sV -sC -O -n -oA <file> <domain>

# Nmap fast scan for the most 1000tcp ports used
nmap -sV -sC -O -T4 -n -Pn -oA <file>  <IP> 
```

### UDP

- Send a **UDP packet** and check for the response _**ICMP unreachable**_ if the port is **closed** (in several cases ICMP will be **filtered** so you won't receive any information inf the port is close or open).
- Send a **formatted datagrams** to elicit a response from a **service** (e.g., DNS, DHCP, TFTP, and others, as listed in _nmap-payloads_). If you receive a **response**, then, the port is **open**.

```bash
# Check if any of the most common udp services is running
udp-proto-scanner.pl <IP> 
# Nmap fast check if any of the 100 most common UDP services is running
nmap -sU -sV --version-intensity 0 -n -F -T4 <IP>
```

## Detect Subdomain and route

>[!info]
>Domain is other important part which one give us the accessible target to attack and exploit, and inside domain will include two things subdomain and route directories

Tools: [recon-ng](https://github.com/lanmaster53/recon-ng), [httpx](https://github.com/projectdiscovery/httpx), [subfinder](https://github.com/projectdiscovery/subfinder) ,[gobuster](https://github.com/OJ/gobuster)

Use these tools for help us detect some information of target, such as

- Do targets have any deeper level inside these subdomain?
- Any hidden route or subdomain can we access and exploit?
- Any domain we can takeover or try to get leaking data of them, such as email or information about `DNS`?

Plan I will use `gobuster` for scan domain in any target with [wordlist](https://github.com/kkrypt0nn/wordlists) of `kali` and `rockyou.txt` (upgrade 2024)

```bash
gobuster dir -u https://example.com -w ~/wordlists/shortlist.txt
```

Use `subfinder` and `httpx` for doing stuff for enumeration subdomain and check state of them via command

```bash
cat targets.txt | subfinder -silent | httpx -silent
```


## Technologies Detection

>[!info]
>This step will include figure out what target have and operate on what version if you take a the information to help you define strategy to inject  or apply attack plan with theses targets

Tool: [Wappalyzer](https://www.wappalyzer.com/)

`Wappalyzer` provide us web UI or extension in browser to detect and get the result of response in network tab to expose what technologies is working inside target, such as

- Web Server
- Framework Version
- Frontend Framework
- CDN
- PaaS
- ...

## External Detection

>[!info]
>We can use another tools for check all about information of target to figure out any leaking of theses target in Internet

Figure out certificate, domain and information around the target, such as

- [crt.sh](https://crt.sh/)
- [censys](https://search.censys.io/)
- [shodan](https://www.shodan.io/)

# Vulnerable Detection & Exploit

## Passive and fuzzing

With passive and fuzzing vulnerable, I will use techniques to run attack script with 3 tools in these target which help us detect some formation if any vulnerable can effect to target services

- [OWASP ZAP](https://www.zaproxy.org/) (Opensource)
- [BurpSuite](https://portswigger.net/burp/communitydownload) (Opensource Community Version)
- [Nuclei](https://github.com/projectdiscovery/nuclei) (Opensource)

>[!info]
>Use these tools which one correspondant with your strategy, in our situation, I will handle that via Burpsuite but in Enterprise version. If I have enough time, we can write the script for pentest in this type via Nuclei

Expect vulnerables will find in the system

- OWASP TOP 10 or OWASP API
- SQL Injection (All of types, concern about blind)
- XSS
- LFI (Path Traversal)
- Data Leaking
- ...

## Manually

>[!info]
>Mostly fuzzing and passive can't bring back the good result so combine with manually, we can get higher value

In the different case, so you will attack with strategy by categories of vulnerables. Check out theses checklists

- [Web Pentesting Checklist](https://github.com/harshinsecurity/web-pentesting-checklist)
- [OWASP Penetration Testing Check List](https://owasp.org/www-project-web-security-testing-guide/assets/archive/OWASP_Web_Application_Penetration_Checklist_v1_1.pdf)
- [Web Application penetration check list](https://hariprasaanth.notion.site/WEB-APPLICATION-PENTESTING-CHECKLIST-0f02d8074b9d4af7b12b8da2d46ac998)

Base on another reasonable, you can integrate another topics inside manual penetration testing, such as

- Cloud
- Directory
- Reverse
- Forensic
- ........

# Post Exploit + Report

>[!info]
>Give the best idea to help customer receive and image what need to do for reappear bug again, and give the solution to resolve as soon as possible

Report will include information about target, for example via [this template](https://labs.hackthebox.com/storage/press/samplereport/sample-penetration-testing-report-template.pdf)

- Statement of confidentiality
- Engagement contacts
- Executive Summary
- Reconnaissance Summary
- Technical Findings Details
- Remediation Summary





